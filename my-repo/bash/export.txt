---------------------------------------------------------

export делает переменную доступной для всех следующих команд, которые выполняются в этой оболочке. Команда export помечает MYVAR для автоматического экспорта в среду дочерних процессов, которые создаются такими командами:

$ export MYVAR=1729
$ echo $MYVAR
1729
$ bash    # Open a new child shell
$ echo $MYVAR
1729

Если переменная задана без использования export, то она будет доступна только внутри оболочки. Другими словами, дочерние оболочки, процесс или команды вне ее не получат доступа к ней:

$ MYVAR=1729
$ echo $MYVAR
1729
$ bash    # Open a new child shell
$ echo $MYVAR
$

------------------------------------------------------------
export может экспортировать функции. Для этого нужно использовать опцию командной строки export -f. Стоит отметить, что функции будут доступны и в дочерних оболочках и процессах:

$ func(){
> echo hi
> }
$ func
hi
$ bash    # Open a new child shell
$ func
bash: func: command not found
$ exit   # Back to parent shell
$ export -f func
$ bash    # Open a new child shell
$ func
hi
------------------------------------------------------------
Удаление переменной

Для удаления export -n:

$ echo $USER
ubuntu
$ bash    # Open a new child shell
$ echo $USER
ubuntu
$ exit   # Back to parent shell
$ export -n USER
$ bash    # Open a new child shell again
$ echo $USER
$
----------------------------------------------------------
Список всех экспортированных переменных

Для получения списка всех переменных и функций, экспортированных в текущую оболочку, используется команда:
export -p
----------------------------------------------------------
Автоматический экспорт всех переменных

Для автоматического экспорта всех переменных, определенных в текущей оболочке, существует опция all export. Ее можно включать или отключать, используя команду set:

$ set -a # Enable allexport using single letter syntax
$ set -o allexport # Enable using full option name syntax

$ set +a # Disable allexport using single letter syntax
$ set +o allexport # Disable using full option name syntax

$ set -a
$ MYVAR=1729    # no export
$ bash    # Open a new child shell
$ echo $MYVAR
1729

Эту команду полезно включать перед вызовом сценария Bash, который определяет множество переменных без команды экспорта.
------------------------------------------------------------
Export во время выполнения скрипта

Выполнение сценария с командой export из командной оболочки происходит в дочерней оболочке. Это означает, что любые переменные, экспортируемые сценарием, будут доступны только его дочерним оболочкам, но не родительской. Когда выполнение сценария завершится, экспортированные переменные исчезнут из среды:

$ echo "export MYVAR=1729" > myscript.sh
$ chmod +x myscript.sh
$ ./myscript.sh
$ echo $MYVAR
$

Экспорт переменной в родительскую оболочку

Если при выполнении сценария необходимо экспортировать переменную окружения в родительскую оболочку, можно использовать команду source. Она позволяет выполнить сценарий в текущей среде без создания дочерней оболочки.

$ echo "MYVAR=1729" > myscript.sh
$ source myscript.sh
$ echo $MYVAR
1729





